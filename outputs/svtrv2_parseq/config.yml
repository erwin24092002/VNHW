Global:
  device: gpu
  epoch_num: 500
  log_smooth_window: 50
  print_batch_step: 100
  output_dir: outputs/svtrv2_parseq_02
  eval_epoch_step:
  - 0
  - 1
  eval_batch_step:
  - 0
  - 500
  save_epoch_step:
  - 15
  - 9999
  cal_metric_during_train: false
  pretrained_model: outputs/svtrv2_parseq/best.pth
  checkpoints: null
  use_tensorboard: false
  infer_img: data/data_raw/UIT_HWDB_word/train_data/1
  character_dict_path: data/character_dict/uit_hwdb_word.txt
  max_text_length: 15
  use_space_char: false
  use_amp: true
  save_res_path: outputs/svtrv2_parseq/predicts_svtrv2_parseq.txt
  distributed: false
Optimizer:
  name: AdamW
  lr: 3.0e-05
  weight_decay: 0.05
  filter_bias_and_bn: false
LRScheduler:
  name: OneCycleLR
  warmup_epoch: 5
  cycle_momentum: false
Architecture:
  model_type: rec
  algorithm: PARSeq
  Transform: null
  Encoder:
    name: SVTRv2LNConvTwo33
    use_pos_embed: false
    dims:
    - 128
    - 256
    - 384
    depths:
    - 6
    - 6
    - 6
    num_heads:
    - 4
    - 8
    - 12
    mixer:
    - - Conv
      - Conv
      - Conv
      - Conv
      - Conv
      - Conv
    - - Conv
      - Conv
      - FGlobal
      - Global
      - Global
      - Global
    - - Global
      - Global
      - Global
      - Global
      - Global
      - Global
    local_k:
    - - 5
      - 5
    - - 5
      - 5
    - - -1
      - -1
    sub_k:
    - - 1
      - 1
    - - 2
      - 1
    - - -1
      - -1
    last_stage: false
  Decoder:
    name: PARSeqDecoder
    decode_ar: true
    refine_iters: 0
    only_attn: false
Loss:
  name: PARSeqLoss
PostProcess:
  name: ARLabelDecode
  character_dict_path: data/character_dict/uit_hwdb_word.txt
  use_space_char: false
Metric:
  name: RecMetric
  main_indicator: acc
  is_filter: false
Train:
  dataset:
    name: RatioDataSetTVResize
    ds_width: true
    padding: false
    data_dir_list:
    - data/data_lmdb/train
    transforms:
    - DecodeImagePIL:
        img_mode: RGB
    - ARLabelEncode:
        character_dict_path: data/character_dict/uit_hwdb_word.txt
        use_space_char: false
        max_text_length: 15
    - KeepKeys:
        keep_keys:
        - image
        - label
        - length
  sampler:
    name: RatioSampler
    scales:
    - - 192
      - 64
    first_bs: 130
    fix_bs: false
    divided_factor:
    - 4
    - 16
    is_training: true
  loader:
    shuffle: true
    batch_size_per_card: 130
    drop_last: true
    max_ratio: 4
    num_workers: 4
Eval:
  dataset:
    name: RatioDataSetTVResize
    ds_width: true
    padding: false
    data_dir_list:
    - data/data_lmdb/test
    transforms:
    - DecodeImagePIL:
        img_mode: RGB
    - ARLabelEncode:
        character_dict_path: data/character_dict/uit_hwdb_word.txt
        use_space_char: false
        max_text_length: 15
    - KeepKeys:
        keep_keys:
        - image
        - label
        - length
  sampler:
    name: RatioSampler
    scales:
    - - 192
      - 64
    first_bs: 130
    fix_bs: false
    divided_factor:
    - 4
    - 16
    is_training: false
  loader:
    shuffle: false
    drop_last: false
    batch_size_per_card: 130
    max_ratio: 4
    num_workers: 4
filename: svrtv2_parseq
config: ./configs/svrtv2_parseq.yml
local_rank: null
eval: true
